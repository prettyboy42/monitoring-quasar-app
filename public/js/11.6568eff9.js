(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[11],{a4e3:function(e,t,r){"use strict";r.r(t);var o=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("card-base",{staticStyle:{"min-height":"315px"}},[r("transition",{attrs:{appear:"","enter-active-class":"animated fadeIn","leave-active-class":"animated fadeOut"}},[r("apexchart",{directives:[{name:"show",rawName:"v-show",value:e.showSimulatedReturnData,expression:"showSimulatedReturnData"}],ref:"realtimeChart",attrs:{type:"line",width:e.chartWidth,height:e.chartHeight,options:e.chartOptions,series:e.chartSeries}})],1),r("q-inner-loading",{attrs:{showing:e.visible}},[r("q-spinner-ios",{attrs:{size:"50px",color:"yellow"}})],1)],1)},a=[],i=r("9ab4"),s=r("60a3"),n=r("6fc5"),h=r("00f1"),c=r("4c9f"),l=r("b318"),d=r("9ba6"),u=r("fe09");let m=class extends s["c"]{constructor(){var e;super(...arguments),this.smonStore=Object(n["e"])(c["a"],this.$store),this.layoutStore=Object(n["e"])(h["e"],this.$store),this.apiCaller=new l["a"],this.visible=!0,this.showSimulatedReturnData=!1,this.chartSeries=[],this.colors=["linear-gradient( 135deg, #ABDCFF 10%, #0396FF 100%)","linear-gradient( 135deg, #2AFADF 10%, #4C83FF 100%)","linear-gradient( 135deg, #FFD3A5 10%, #FD6585 100%)","linear-gradient( 135deg, #EE9AE5 10%, #5961F9 100%)"],this.chartOptions={theme:{mode:"light",palette:"palette1"},title:{text:this.chartTitle,align:"left",style:{color:"#131413"}},noData:{text:"Loading...",align:"center",verticalAlign:"middle",offsetX:0,offsetY:0,style:{color:"#a84a32",fontSize:"14px",fontFamily:"Helvetica, Arial"}},tooltip:{enabled:!0,enabledOnSeries:void 0,shared:!0,x:{show:!0,format:"dd MMM yyyy HH:mm:ss"}},chart:{id:this.chartId,group:this.chartGroup,type:"line",toolbar:{show:!0,tools:{download:!0,selection:!1,zoom:!0,zoomin:!0,zoomout:!0,pan:!1,reset:!0,customIcons:[{icon:'<img src="https://img.icons8.com/plasticine/100/000000/download-2.png" width="20">',index:3,title:"tooltip of the icon",class:"custom-icon",click:function(){}}]}},animations:{enabled:!1}},markers:{size:0},grid:{show:!0,strokeDashArray:0,xaxis:{lines:{show:!0}}},stroke:{curve:"smooth",width:1},dropShadow:{enabled:!0,opacity:.3,blur:5,left:-7,top:22},dataLabels:{enabled:!1},xaxis:{type:"datetime",labels:{style:{colors:"#a35822"},datetimeUTC:!1}},yaxis:{labels:{minWidth:40,style:{}},min:0},legend:{show:this.smonStore.enableChartLegend,showForSingleSeries:(null===(e=this.smonStore.currentMetric)||void 0===e?void 0:e.length)>1||!1,showForNullSeries:!0,showForZeroSeries:!0,position:this.smonStore.currentLegendType==d["b"].BY_DAY?"right":"bottom",inverseOrder:this.smonStore.currentLegendType==d["b"].BY_DAY,offsetY:5},responsive:[{breakpoint:1e3,options:{legend:{showForSingleSeries:!0,position:"bottom"},theme:{mode:"light",palette:"palette6"}}}]}}created(){this.fecthChartSeries()}updated(){}beforeDestroy(){this.$refs.realtimeChart.destroy()}toggleOnSpinner(){this.visible=!0,this.showSimulatedReturnData=!1}toggleOffSpinner(){this.visible=!1,this.showSimulatedReturnData=!0}handleToogleOnOffLegend(e){const t=this.smonStore.getFirstChart;t.id==this.chartId&&this.$refs.realtimeChart.updateOptions({legend:{show:e}},!1,!1,!0)}handleToogleOnOffSyncChart(e){this.$refs.realtimeChart.updateOptions({chart:{group:e?this.chartGroup:this.chartId}},!1,!1,!1)}handleToogleLegendType(e){this.fecthChartSeries().then(()=>{this.$refs.realtimeChart.updateOptions({legend:{position:e==d["b"].BY_DAY?"right":"bottom",inverseOrder:this.smonStore.currentLegendType==d["b"].BY_DAY}},!1,!1,!0)})}onChangedrequireRenderChart(e){e&&this.fecthChartSeries()}onChangedForceRefresh(e){e&&this.fecthChartSeries().then(()=>{this.layoutStore.setForceRefresh(!1)})}onChangedTickInterval(e){e>0&&this.fecthChartSeries().then(()=>{this.layoutStore.setForceRefresh(!1)})}onChangedTimeRangeInterval(){this.fecthChartSeries().then(()=>{this.layoutStore.setForceRefresh(!1)})}renderNodataChart(){this.$refs.realtimeChart.updateOptions({noData:{text:"No available data",style:{fontSize:"18px"}}},!1,!1,!1)}calculateTimeRange(e){const t=Date.now();switch(e){case h["c"].WHOLE_TODAY:return{from:u["c"].startOfDate(t,"day").getTime(),to:u["c"].endOfDate(t,"day").getTime()};case h["c"].TODAY_TO_NOW:return{from:u["c"].startOfDate(t,"day").getTime(),to:t};case h["c"].LAST_15_MINUTES:return{from:u["c"].subtractFromDate(t,{minutes:15}).getTime(),to:t};case h["c"].LAST_30_MINUTES:return{from:u["c"].subtractFromDate(t,{minutes:30}).getTime(),to:t};case h["c"].LAST_AN_HOUR:return{from:u["c"].subtractFromDate(t,{hours:1}).getTime(),to:t};case h["c"].LAST_2_HOURS:return{from:u["c"].subtractFromDate(t,{hours:2}).getTime(),to:t};case h["c"].LAST_4_HOURS:return{from:u["c"].subtractFromDate(t,{hours:4}).getTime(),to:t};case h["c"].LAST_8_HOURS:return{from:u["c"].subtractFromDate(t,{hours:8}).getTime(),to:t};case h["c"].LAST_12_HOURS:return{from:u["c"].subtractFromDate(t,{hours:12}).getTime(),to:t};case h["c"].LAST_24_HOURS:return{from:u["c"].subtractFromDate(t,{hours:24}).getTime(),to:t};case h["c"].LAST_7_DAYS:return{from:u["c"].subtractFromDate(t,{days:7}).getTime(),to:t};default:return{from:u["c"].startOfDate(t,"day").getTime(),to:u["c"].endOfDate(t,"day").getTime()}}}fecthChartSeries(){var e;return Object(i["a"])(this,void 0,void 0,(function*(){this.toggleOnSpinner();const t=this.calculateTimeRange(this.layoutStore.timeRangeInterval),r=[0,7].join(","),o=this.layoutStore.tickTimeInterval,a=this.smonStore.currentLegendType;try{const i=yield this.apiCaller.getChartData(this.smonStore.appName,this.smonStore.currentProfilerApi,this.smonStore.buildMetricParams,this.serverIp,t.from,t.to,r,o,a);i.data.error<0&&this.renderNodataChart();const s=(null===(e=i.data.data.result)||void 0===e?void 0:e.listSeries)||[];this.chartSeries=s}catch(i){this.$q.notify({color:"negative",position:"top",message:`fecthChartSeries failed. chartId:${this.chartId}, error:${i}`,icon:"report_problem"})}this.smonStore.setToggleRenderChart(!1),this.toggleOffSpinner()}))}};Object(i["b"])([Object(s["b"])({default:"0"})],m.prototype,"chartId",void 0),Object(i["b"])([Object(s["b"])({default:"defaultGroup"})],m.prototype,"chartGroup",void 0),Object(i["b"])([Object(s["b"])({default:"0.0.0.0"})],m.prototype,"serverIp",void 0),Object(i["b"])([Object(s["b"])({default:""})],m.prototype,"chartTitle",void 0),Object(i["b"])([Object(s["b"])({default:"100%"})],m.prototype,"chartWidth",void 0),Object(i["b"])([Object(s["b"])({default:"300"})],m.prototype,"chartHeight",void 0),Object(i["b"])([Object(s["d"])("smonStore.enableChartLegend")],m.prototype,"handleToogleOnOffLegend",null),Object(i["b"])([Object(s["d"])("smonStore.enableChartSync")],m.prototype,"handleToogleOnOffSyncChart",null),Object(i["b"])([Object(s["d"])("smonStore.chartLegendType")],m.prototype,"handleToogleLegendType",null),Object(i["b"])([Object(s["d"])("smonStore.requireRenderChart")],m.prototype,"onChangedrequireRenderChart",null),Object(i["b"])([Object(s["d"])("layoutStore.forceRefresh")],m.prototype,"onChangedForceRefresh",null),Object(i["b"])([Object(s["d"])("layoutStore.tickTimeInterval")],m.prototype,"onChangedTickInterval",null),Object(i["b"])([Object(s["d"])("layoutStore.timeRangeInterval")],m.prototype,"onChangedTimeRangeInterval",null),m=Object(i["b"])([Object(s["a"])({components:{CardBase:()=>r.e(10).then(r.bind(null,"fc8b"))}})],m);var p=m,b=p,g=r("2877"),f=Object(g["a"])(b,o,a,!1,null,null,null);t["default"]=f.exports}}]);